begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to the Apache Software Foundation (ASF) under one or more  * contributor license agreements.  See the NOTICE file distributed with  * this work for additional information regarding copyright ownership.  * The ASF licenses this file to You under the Apache License, Version 2.0  * (the "License"); you may not use this file except in compliance with  * the License.  You may obtain a copy of the License at  *  *      http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  * See the License for the specific language governing permissions and  * limitations under the License.  */
end_comment

begin_package
package|package
name|org
operator|.
name|apache
operator|.
name|jackrabbit
operator|.
name|oak
operator|.
name|plugins
operator|.
name|version
package|;
end_package

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Arrays
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Collection
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Collections
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Set
import|;
end_import

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|collect
operator|.
name|ImmutableSet
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|jackrabbit
operator|.
name|JcrConstants
import|;
end_import

begin_comment
comment|/**  * VersionConstants... TODO  */
end_comment

begin_interface
specifier|public
interface|interface
name|VersionConstants
extends|extends
name|JcrConstants
block|{
comment|// version storage
name|String
name|REP_VERSIONSTORAGE
init|=
literal|"rep:versionStorage"
decl_stmt|;
comment|// activities
name|String
name|JCR_ACTIVITY
init|=
literal|"jcr:activity"
decl_stmt|;
name|String
name|JCR_ACTIVITIES
init|=
literal|"jcr:activities"
decl_stmt|;
name|String
name|JCR_ACTIVITY_TITLE
init|=
literal|"jcr:activityTitle"
decl_stmt|;
name|String
name|NT_ACTIVITY
init|=
literal|"nt:activity"
decl_stmt|;
name|String
name|REP_ACTIVITIES
init|=
literal|"rep:Activities"
decl_stmt|;
comment|// configurations
name|String
name|JCR_CONFIGURATION
init|=
literal|"jcr:configuration"
decl_stmt|;
name|String
name|JCR_CONFIGURATIONS
init|=
literal|"jcr:configurations"
decl_stmt|;
name|String
name|JCR_ROOT
init|=
literal|"jcr:root"
decl_stmt|;
comment|// TODO: possible collisions?
name|String
name|NT_CONFIGURATION
init|=
literal|"nt:configuration"
decl_stmt|;
name|String
name|REP_CONFIGURATIONS
init|=
literal|"rep:Configurations"
decl_stmt|;
comment|// nt:versionHistory
name|String
name|JCR_COPIED_FROM
init|=
literal|"jcr:copiedFrom"
decl_stmt|;
comment|// nt:versionedChild
name|String
name|JCR_CHILD_VERSION_HISTORY
init|=
literal|"jcr:childVersionHistory"
decl_stmt|;
comment|/**      * @since OAK 1.0      */
name|String
name|MIX_REP_VERSIONABLE_PATHS
init|=
literal|"rep:VersionablePaths"
decl_stmt|;
comment|/**      * Version operation property name to add version labels.      */
name|String
name|REP_ADD_VERSION_LABELS
init|=
literal|"rep:addVersionLabels"
decl_stmt|;
comment|/**      * Version operation property name to remove version labels.      */
name|String
name|REP_REMOVE_VERSION_LABELS
init|=
literal|"rep:removeVersionLabels"
decl_stmt|;
comment|/**      * Version operation property name to remove version(s).      */
name|String
name|REP_REMOVE_VERSION
init|=
literal|"rep:removeVersion"
decl_stmt|;
comment|/**      * Prefix of the jcr:baseVersion value for a restore.      */
name|String
name|RESTORE_PREFIX
init|=
literal|"restore-"
decl_stmt|;
comment|/**      * Quote from JSR 283 Section "15.12.3 Activity Storage"<p>      *<p>      * Activities are persisted as nodes of type nt:activity under system-generated      * node names in activity storage below /jcr:system/jcr:activities.<br>      * Similar to the /jcr:system/jcr:versionStorage subgraph, the activity storage      * is a single repository wide store, but is reflected into each workspace.      */
name|String
name|ACTIVITIES_PATH
init|=
literal|'/'
operator|+
name|JCR_SYSTEM
operator|+
literal|'/'
operator|+
name|JCR_ACTIVITIES
decl_stmt|;
comment|/**      * Quote from JSR 283 Section "15.13.2 Configuration Proxy Nodes"<p>      *<p>      * Each configuration in a given workspace is represented by a distinct proxy      * node of type nt:configuration located in configuration storage within the      * same workspace under /jcr:system/jcr:configurations/. The configuration      * storage in a particular workspace is specific to that workspace. It is      * not a common repository-wide store mirrored into each workspace, as is      * the case with version storage.      */
name|String
name|CONFIGURATIONS_PATH
init|=
literal|'/'
operator|+
name|JCR_SYSTEM
operator|+
literal|'/'
operator|+
name|JCR_CONFIGURATIONS
decl_stmt|;
comment|/**      * Quote from JSR 283 Section "3.13.8 Version Storage"<p>      *<p>      * Version histories are stored in a single, repository-wide version storage      * mutable and readable through the versioning API.      * Under full versioning the version storage data must, additionally, be      * reflected in each workspace as a protected subgraph [...] located below      * /jcr:system/jcr:versionStorage.      */
name|String
name|VERSION_STORE_PATH
init|=
literal|'/'
operator|+
name|JCR_SYSTEM
operator|+
literal|'/'
operator|+
name|JCR_VERSIONSTORAGE
decl_stmt|;
name|Collection
argument_list|<
name|String
argument_list|>
name|SYSTEM_PATHS
init|=
name|Collections
operator|.
name|unmodifiableList
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|ACTIVITIES_PATH
argument_list|,
name|CONFIGURATIONS_PATH
argument_list|,
name|VERSION_STORE_PATH
argument_list|)
argument_list|)
decl_stmt|;
name|Collection
argument_list|<
name|String
argument_list|>
name|VERSION_PROPERTY_NAMES
init|=
name|Collections
operator|.
name|unmodifiableList
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|JCR_ACTIVITY
argument_list|,
name|JCR_ACTIVITY_TITLE
argument_list|,
name|JCR_BASEVERSION
argument_list|,
name|JCR_CHILD_VERSION_HISTORY
argument_list|,
name|JCR_CONFIGURATION
argument_list|,
name|JCR_COPIED_FROM
argument_list|,
name|JCR_FROZENMIXINTYPES
argument_list|,
name|JCR_FROZENPRIMARYTYPE
argument_list|,
name|JCR_FROZENUUID
argument_list|,
name|JCR_ISCHECKEDOUT
argument_list|,
name|JCR_MERGEFAILED
argument_list|,
name|JCR_PREDECESSORS
argument_list|,
name|JCR_ROOT
argument_list|,
name|JCR_SUCCESSORS
argument_list|,
name|JCR_VERSIONABLEUUID
argument_list|,
name|JCR_VERSIONHISTORY
argument_list|)
argument_list|)
decl_stmt|;
name|Collection
argument_list|<
name|String
argument_list|>
name|VERSION_NODE_NAMES
init|=
name|Collections
operator|.
name|unmodifiableList
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|JCR_ACTIVITIES
argument_list|,
name|JCR_CONFIGURATIONS
argument_list|,
name|JCR_FROZENNODE
argument_list|,
name|JCR_ROOTVERSION
argument_list|,
name|JCR_VERSIONLABELS
argument_list|)
argument_list|)
decl_stmt|;
name|Collection
argument_list|<
name|String
argument_list|>
name|VERSION_NODE_TYPE_NAMES
init|=
name|Collections
operator|.
name|unmodifiableList
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|NT_ACTIVITY
argument_list|,
name|NT_CONFIGURATION
argument_list|,
name|NT_FROZENNODE
argument_list|,
name|NT_VERSION
argument_list|,
name|NT_VERSIONEDCHILD
argument_list|,
name|NT_VERSIONHISTORY
argument_list|,
name|NT_VERSIONLABELS
argument_list|,
name|REP_ACTIVITIES
argument_list|,
name|REP_CONFIGURATIONS
argument_list|)
argument_list|)
decl_stmt|;
name|Set
argument_list|<
name|String
argument_list|>
name|VERSION_STORE_ROOT_NAMES
init|=
name|ImmutableSet
operator|.
name|of
argument_list|(
name|JcrConstants
operator|.
name|JCR_VERSIONSTORAGE
argument_list|,
name|VersionConstants
operator|.
name|JCR_CONFIGURATIONS
argument_list|,
name|VersionConstants
operator|.
name|JCR_ACTIVITIES
argument_list|)
decl_stmt|;
name|Set
argument_list|<
name|String
argument_list|>
name|VERSION_STORE_NT_NAMES
init|=
name|ImmutableSet
operator|.
name|of
argument_list|(
name|VersionConstants
operator|.
name|REP_VERSIONSTORAGE
argument_list|,
name|VersionConstants
operator|.
name|REP_ACTIVITIES
argument_list|,
name|VersionConstants
operator|.
name|REP_CONFIGURATIONS
argument_list|)
decl_stmt|;
block|}
end_interface

end_unit

